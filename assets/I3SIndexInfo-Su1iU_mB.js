import{L as u,n as f}from"./index-hMxGkU4_.js";async function x(r,o,e,t,a,s){let l=null;if(e!=null){const n=`${r}/nodepages/`,p=n+Math.floor(e.rootIndex/e.nodesPerPage);try{return{type:"page",rootPage:(await u(p,{query:{f:"json",token:t},responseType:"json",signal:s})).data,rootIndex:e.rootIndex,pageSize:e.nodesPerPage,lodMetric:e.lodSelectionMetricType,urlPrefix:n}}catch(c){a!=null&&a.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",p,c),l=c}}if(!o)return null;const g=o==null?void 0:o.split("/").pop(),d=`${r}/nodes/`,i=d+g;try{return{type:"node",rootNode:(await u(i,{query:{f:"json",token:t},responseType:"json",signal:s})).data,urlPrefix:d}}catch(n){throw new f("sceneservice:root-node-missing","Root node missing.",{pageError:l,nodeError:n,url:i})}}export{x as r};
