import{bT as c}from"./index-Ozl5EVlb.js";function a(n){return n?b:E}function d(n,e){return e!=null&&e.mode?e.mode:a(n).mode}function v(n,e){return e??a(n)}function g(n,e){return d(n!=null&&n.hasZ,e)}function x(n,e){return v(n!=null&&!!n.hasZ,e)}function y(n){const e=h(n),o=g(n.geometry,e);return{mode:o,offset:e!=null&&o!=="on-the-ground"?(e.offset??0)*c(e.unit??"meters"):0}}function h(n){return n.layer&&"elevationInfo"in n.layer?n.layer.elevationInfo:null}function I(n,e,o,t=null){return f(n,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,o,t)}function $(n,e,o,t,l=null){return f(n,e[0],e[1],e.length>2?e[2]:0,o,t,l)}function f(n,e,o,t,l,i,u=null){if(i==null)return;const r=u!=null?u.mode:"absolute-height";if(r==="on-the-ground")return 0;const{absoluteZ:s}=m(e,o,t,l,n,i);return p(s,e,o,t,l,n,u,r)}function m(n,e,o,t,l,i){const u=i.offset!=null?i.offset:0;switch(i.mode){case"absolute-height":return{absoluteZ:o+u,elevation:0};case"on-the-ground":{const r=l.elevationProvider.getElevation(n,e,0,t,"ground")??0;return{absoluteZ:r,elevation:r}}case"relative-to-ground":{const r=l.elevationProvider.getElevation(n,e,o,t,"ground")??0;return{absoluteZ:o+r+u,elevation:r}}case"relative-to-scene":{const r=l.elevationProvider.getElevation(n,e,o,t,"scene")??0;return{absoluteZ:o+r+u,elevation:r}}}}function p(n,e,o,t,l,i,u,r){const s=(u==null?void 0:u.offset)!=null?u.offset:0;switch(r){case"absolute-height":return n-s;case"relative-to-ground":return n-((i.elevationProvider.getElevation(e,o,t,l,"ground")??0)+s);case"relative-to-scene":return n-((i.elevationProvider.getElevation(e,o,t,l,"scene")??0)+s)}}function P(n,e){if(e==null)return!1;const{mode:o}=e;return o!=null&&(n==="scene"&&o==="relative-to-scene"||n==="ground"&&o!=="absolute-height")}function w(n,e,o){return o&&o.mode!==e?`${n} only support ${e} elevation mode`:null}function z(n,e,o){return(o==null?void 0:o.mode)===e?`${n} do not support ${e} elevation mode`:null}function R(n,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${n} do not support featureExpressionInfo`:null}function T(n,e){e&&n.warn(".elevationInfo=",e)}const b={mode:"absolute-height",offset:0},E={mode:"on-the-ground",offset:null};export{R as E,E as Z,z as b,I as c,$ as d,m as g,P as m,w as p,g as r,y as s,x as u,T as x,b as y};
